<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta
      name="viewport"
      content="width=device-width,
               initial-scale=1.0"
    />
    <title>
      Housing Affordability ‚Äì Multi-Location Comparator (v3.3)
    </title>
    <style>
      :root {
        --bg: #121212;
        --panel: #1e1e1e;
        --accent: #3b82f6;
        --text: #e5e5e5;
        --good: #22c55e;
        --bad: #ef4444;
      }
      body {
        margin: 0;
        font-family: system-ui, sans-serif;
        background: var(--bg);
        color: var(--text);
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
        padding: 20px;
      }
      h1 {
        margin-bottom: 10px;
        font-size: 1.4rem;
        text-align: center;
      }
      .wrap {
        display: grid;
        grid-template-columns: 290px 1fr;
        gap: 20px;
        width: 100%;
        max-width: 1250px;
      }
      select,
      input[type="number"],
      input[type="range"],
      button {
        width: 100%;
        padding: 6px;
        border-radius: 4px;
        border: 1px solid #333;
        background: #0f0f0f;
        color: var(--text);
      }
      label {
        font-size: 0.85rem;
        display: block;
        margin: 8px 0 4px;
      }
      .panel {
        background: var(--panel);
        padding: 20px;
        border-radius: 8px;
      }
      .result {
        margin-top: 10px;
        font-weight: 600;
      }
      canvas {
        background: #0f0f0f;
        border-radius: 6px;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js">
    </script>
  </head>
  <body>
    <h1>Housing Affordability ‚Äì Compare Locations</h1>
    <div class="wrap">
      <div class="panel">
        <label>
          Locations (Ctrl/Cmd + click to multi-select)
        </label>
        <select id="loc" multiple size="14">
          <optgroup label="Centro">
            <option value="grupo_Centro">
              Centro (grupo)
            </option>
            <option>La Latina</option>
            <option>Lavapi√©s</option>
            <option>Malasa√±a</option>
          </optgroup>
          <optgroup label="Periferia municipal">
            <option value="grupo_PeriferiaMunicipal">
              Periferia municipal (grupo)
            </option>
            <option>San Isidro</option>
            <option>Embajadores</option>
            <option>Barajas</option>
          </optgroup>
          <optgroup label="Periferia provincial">
            <option value="grupo_PeriferiaProvincial">
              Periferia provincial (grupo)
            </option>
            <option>Segovia</option>
            <option>Guadalajara</option>
          </optgroup>
          <optgroup label="Sierra Madrid">
            <option value="grupo_SierraMadrid">
              Sierra Madrid (grupo)
            </option>
            <option>Becerril</option>
            <option>Navacerrada</option>
          </optgroup>
          <optgroup label="Costa Andaluza">
            <option value="grupo_CostaAndaluza">
              Costa Andaluza (grupo)
            </option>
            <option>Costa Andaluza</option>
          </optgroup>
          <optgroup label="Almer√≠a">
            <option value="grupo_Almeria">
              Almer√≠a (grupo)
            </option>
            <option value="Centro Almer√≠a">Centro Almer√≠a</option>
            <option value="Retamar">Retamar</option>
            <option value="Aguadulce">Aguadulce</option>
            <option value="Roquetas de Mar">Roquetas de Mar</option>
          </optgroup>
          <optgroup label="Canarias">
            <option value="grupo_Canarias">
              Canarias (grupo)
            </option>
            <option>Lanzarote</option>
            <option>La Palma</option>
            <option>Tenerife</option>
            <option>Gran Canaria</option>
          </optgroup>
          <optgroup label="Provincias">
            <option>√Ålava</option>
            <option>Albacete</option>
            <option>Alicante</option>
            <option>Almer√≠a</option>
            <option>Asturias</option>
            <option>√Åvila</option>
            <option>Badajoz</option>
            <option>Barcelona</option>
            <option>Burgos</option>
            <option>C√°ceres</option>
            <option>C√°diz</option>
            <option>Cantabria</option>
            <option>Castell√≥n</option>
            <option>Ciudad Real</option>
            <option>C√≥rdoba</option>
            <option>Cuenca</option>
            <option>Girona</option>
            <option>Granada</option>
            <option>Guadalajara</option>
            <option>Guip√∫zcoa</option>
            <option>Huelva</option>
            <option>Huesca</option>
            <option>Illes Balears</option>
            <option>Ja√©n</option>
            <option>La Coru√±a</option>
            <option>La Rioja</option>
            <option>Las Palmas</option>
            <option>Le√≥n</option>
            <option>Lleida</option>
            <option>Lugo</option>
            <option>Madrid</option>
            <option>M√°laga</option>
            <option>Murcia</option>
            <option>Navarra</option>
            <option>Ourense</option>
            <option>Palencia</option>
            <option>Pontevedra</option>
            <option>Salamanca</option>
            <option>Santa Cruz de Tenerife</option>
            <option>Segovia</option>
            <option>Sevilla</option>
            <option>Soria</option>
            <option>Tarragona</option>
            <option>Teruel</option>
            <option>Toledo</option>
            <option>Valencia</option>
            <option>Valladolid</option>
            <option>Vizcaya</option>
            <option>Zamora</option>
            <option>Zaragoza</option>
            <option>Ceuta</option>
            <option>Melilla</option>
          </optgroup>
        </select>

        <label>
          Years until purchase:
          <span id="yrsLabel">2</span>
        </label>
        <input
          id="yrs"
          type="range"
          min="1"
          max="15"
          value="2"
        />

        <label>Dwelling size (m¬≤)</label>
        <input
          id="size"
          type="number"
          value="80"
          min="30"
          max="300"
        />

        <label>Starting net salary (‚Ç¨/month)</label>
        <input
          id="salary"
          type="number"
          value="1450"
        />

        <label>
          Savings rate (
          <span id="rateLabel">40</span>%)
        </label>
        <input
          id="rate"
          type="range"
          min="10"
          max="70"
          step="5"
          value="40"
        />

        <label>
          Expected annual return on savings (%)
        </label>
        <input
          id="ret"
          type="number"
          value="2"
          step="0.1"
          min="0"
          max="10"
        />

        <label>
          Long-term inflation floor (%)
        </label>
        <input
          id="inflFloor"
          type="number"
          value="2"
          step="0.1"
          min="0"
          max="5"
        />

        <label>Market scenario</label>
        <select id="scenario">
          <option value="base">
            Base (hist√≥rico)
          </option>
          <option value="optimistic">
            Optimista (IPC +1 %)
          </option>
          <option value="pessimistic">
            Pesimista (pico hist√≥rico)
          </option>
        </select>

        <label>Career path</label>
        <select id="career">
          <option value="stay">
            ‚è≥ Seguir en empresa actual
          </option>
          <option value="odoo">
            üöÄ Cambiar a otro partner Odoo
          </option>
          <option value="ai">
            ü§ñ Pivotar a IA/Python
          </option>
        </select>

        <label>Property metric</label>
        <select id="propMetric">
          <option value="price">
            üè† Precio vivienda
          </option>
          <option value="down">
            üí∞ Entrada 20%
          </option>
          <option value="mortgage">
            üìà Cuota hipoteca
          </option>
        </select>

        <label>Personal metric</label>
        <select id="persMetric">
          <option value="savings">
            üí∏ Ahorros acumulados
          </option>
          <option value="salary">
            ü™ô Salario neto mensual
          </option>
        </select>

        <label>Mortgage rate (%)</label>
        <input
          id="mortRate"
          type="number"
          value="3"
          step="0.1"
          min="0"
          max="10"
        />

        <label>Mortgage term (years)</label>
        <input
          id="mortYears"
          type="number"
          value="30"
          min="5"
          max="40"
        />

        <button
          id="update"
          style="
            margin-top: 14px;
            background: var(--accent);
            border: none;
            color: white;
            cursor: pointer;
          "
        >
          Update
        </button>

        <div class="result" id="summary"></div>
        <p
          style="font-size:0.7rem;
                 opacity:0.7;
                 margin-top:10px;"
        >
          Precios: Idealista 05/2025 ¬∑
          Salarios: Glassdoor 2024-25
        </p>
      </div>

      <div class="panel">
        <canvas id="chart" height="300"></canvas>
      </div>
    </div>

  <script src="provinces.js"></script>
  <script src="main.js"></script>
  </body>
</html>
